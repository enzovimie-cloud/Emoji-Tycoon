<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Tycoon Ultimate</title>
    <style>
        /* --- ESTILOS (CSS) --- */
        :root {
            --bg-color: #0f0f13;
            --card-bg: #1e1e24;
            --accent: #00d4ff; /* Azul Cripto */
            --accent-hover: #00b8de;
            --danger: #ff4757;
            --success: #2ed573;
            --text-main: #ffffff;
            --text-sec: #a4b0be;
            --gold: #ffa502;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            user-select: none; /* Evita seleccionar texto al hacer clic r√°pido */
            overflow-x: hidden;
            padding-bottom: 80px; /* Espacio para el men√∫ inferior */
        }

        /* HEADER */
        header {
            background: rgba(30, 30, 36, 0.95);
            padding: 15px;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 2px solid var(--accent);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }

        .stats-container {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .stat {
            font-size: 1.1rem;
            font-weight: bold;
        }

        .money { color: var(--success); text-shadow: 0 0 5px rgba(46, 213, 115, 0.3); }
        .gems { color: var(--gold); }
        .prod { color: var(--accent); font-size: 0.9rem; }

        .lang-btn {
            background: transparent;
            border: 1px solid var(--text-sec);
            color: var(--text-sec);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            cursor: pointer;
        }

        /* √ÅREA PRINCIPAL (CLIC) */
        .click-area {
            text-align: center;
            padding: 30px 0;
            background: radial-gradient(circle, #2a2a35 0%, #0f0f13 70%);
        }

        #main-btn {
            width: 150px;
            height: 150px;
            background: url('https://cdn-icons-png.flaticon.com/512/6001/6001368.png') no-repeat center center;
            background-size: contain;
            border: none;
            cursor: pointer;
            transition: transform 0.1s;
            filter: drop-shadow(0 0 10px var(--accent));
        }

        #main-btn:active {
            transform: scale(0.95);
        }

        /* EFECTO FIEBRE */
        body.fiebre-mode #main-btn {
            filter: drop-shadow(0 0 20px #ff6b6b);
        }
        body.fiebre-mode header {
            border-bottom-color: #ff6b6b;
        }

        /* SECCIONES Y TARJETAS */
        .section-title {
            padding: 10px 20px;
            font-size: 1.2rem;
            color: var(--text-sec);
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 1px solid #333;
            margin-top: 10px;
        }

        .container {
            padding: 10px;
            max-width: 600px;
            margin: 0 auto;
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-left: 4px solid transparent;
            transition: background 0.2s;
        }

        .card.can-buy { border-left-color: var(--success); }
        .card.cant-buy { opacity: 0.7; }

        .card-icon { font-size: 2rem; margin-right: 15px; width: 40px; text-align: center; }
        
        .card-info { flex-grow: 1; }
        .card-info h4 { margin: 0; font-size: 1rem; color: var(--text-main); }
        .card-info p { margin: 5px 0 0; font-size: 0.85rem; color: var(--accent); }
        .card-info .lvl { font-size: 0.75rem; color: var(--text-sec); margin-left: 5px; }

        .buy-btn {
            background-color: var(--success);
            color: #000;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
            cursor: pointer;
            min-width: 80px;
        }
        .buy-btn:disabled {
            background-color: #555;
            color: #888;
            cursor: not-allowed;
        }

        /* NAVEGACI√ìN INFERIOR (TABS) */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60px;
            background: #15151a;
            display: flex;
            justify-content: space-around;
            align-items: center;
            border-top: 1px solid #333;
        }

        .nav-item {
            flex: 1;
            text-align: center;
            color: var(--text-sec);
            font-size: 0.8rem;
            padding: 10px 0;
            cursor: pointer;
        }
        .nav-item.active { color: var(--accent); border-top: 3px solid var(--accent); }
        .nav-icon { font-size: 1.5rem; display: block; margin-bottom: 2px; }

        /* PANTALLAS (TABS) */
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        /* NOTIFICACIONES */
        .notif-container {
            position: fixed;
            top: 100px; /* Debajo del header */
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            pointer-events: none;
            width: 90%;
            max-width: 400px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .notif {
            background: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 12px 20px;
            border-radius: 50px;
            text-align: center;
            font-size: 0.9rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
            animation: fadeInOut 3s forwards;
            border: 1px solid #444;
        }
        
        /* Animaci√≥n para n√∫meros flotantes al hacer clic */
        .float-num {
            position: absolute;
            color: #fff;
            font-weight: bold;
            pointer-events: none;
            animation: floatUp 0.8s forwards;
            font-size: 1.2rem;
            text-shadow: 0 0 5px var(--success);
        }

        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateY(-20px); }
            10% { opacity: 1; transform: translateY(0); }
            90% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-20px); }
        }

        @keyframes floatUp {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-50px) scale(1.2); opacity: 0; }
        }
    </style>
</head>
<body>

    <header>
        <div class="stats-container">
            <div class="stat money">$ <span id="display-money">0</span></div>
            <div class="stat gems">üíé <span id="display-gems">0</span></div>
            <div class="stat prod">‚ö° <span id="display-prod">0</span> /s</div>
        </div>
        <button class="lang-btn" onclick="toggleLanguage()" id="btn-lang">ES / EN</button>
    </header>

    <div id="notification-area" class="notif-container"></div>

    <div style="margin-bottom: 70px;"> <div id="tab-mining" class="tab-content active">
            <div class="click-area">
                <div id="main-btn" onclick="handleClick(event)"></div>
                <p id="lbl-tap" style="color:#aaa; font-size:0.8rem; margin-top:10px;">¬°Toca para minar!</p>
            </div>

            <div class="section-title" id="lbl-machines">Hardware</div>
            <div class="container" id="machines-list">
                </div>
        </div>

        <div id="tab-crypto" class="tab-content">
            <div class="section-title" id="lbl-market">Mercado Cripto</div>
            <div class="container" id="crypto-list">
                <p style="text-align:center; color:#666; padding:20px;">
                    Aqu√≠ puedes comprar criptomonedas vol√°tiles (Pr√≥ximamente m√°s funciones).
                </p>
            </div>
        </div>

        <div id="tab-upgrades" class="tab-content">
            <div class="section-title" id="lbl-upgrades">Mejoras de Sistema</div>
            <div class="container" id="upgrades-list">
                </div>
        </div>

    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('mining')" id="nav-mining">
            <span class="nav-icon">‚õèÔ∏è</span>
            <span class="nav-text">Miner√≠a</span>
        </div>
        <div class="nav-item" onclick="switchTab('crypto')" id="nav-crypto">
            <span class="nav-icon">üìà</span>
            <span class="nav-text">Mercado</span>
        </div>
        <div class="nav-item" onclick="switchTab('upgrades')" id="nav-upgrades">
            <span class="nav-icon">üöÄ</span>
            <span class="nav-text">Mejoras</span>
        </div>
    </div>

    <script>
        /* --- JAVASCRIPT --- */

        /* 1. CONFIGURACI√ìN Y ESTADO */
        let gameData = {
            money: 0,
            gems: 5, // Damos 5 gemas iniciales de regalo
            prodPerSec: 0,
            clickValue: 1,
            machines: [
                { id: 0, name_es: "Tarjeta Gr√°fica", name_en: "GPU Card", cost: 15, prod: 1, count: 0, icon: "üíª" },
                { id: 1, name_es: "Rig de Miner√≠a", name_en: "Mining Rig", cost: 100, prod: 10, count: 0, icon: "üñ•Ô∏è" },
                { id: 2, name_es: "Servidor B√°sico", name_en: "Basic Server", cost: 1100, prod: 100, count: 0, icon: "üíæ" },
                // FIX L√ìGICA: Cripto F√°brica ahora es muy rentable comparado con 4 servidores
                // Costo 12k vs 4400 (4 servidores). Producci√≥n 1400 vs 400.
                { id: 3, name_es: "Cripto F√°brica", name_en: "Crypto Factory", cost: 12000, prod: 1400, count: 0, icon: "üè≠" },
                { id: 4, name_es: "Granja Cu√°ntica", name_en: "Quantum Farm", cost: 130000, prod: 16000, count: 0, icon: "‚öõÔ∏è" }
            ],
            // Secci√≥n de Criptomonedas (Simulamos que dan multiplicadores o ingresos pasivos especiales)
            cryptos: [
                { id: 0, name_es: "Dogecoin Fake", name_en: "Fake Doge", cost: 5000, desc_es: "+5% Producci√≥n Global", desc_en: "+5% Global Prod", multiplier: 0.05, owned: false, icon: "üê∂" },
                { id: 1, name_es: "Bitcoin Beta", name_en: "Bitcoin Beta", cost: 50000, desc_es: "+10% Producci√≥n Global", desc_en: "+10% Global Prod", multiplier: 0.10, owned: false, icon: "‚Çø" }
            ],
            // Secci√≥n de Mejoras (Usan Gemas o Dinero)
            upgrades: [
                { id: 0, name_es: "Overclock CPU", name_en: "CPU Overclock", type: 'click', cost: 500, costType: 'money', bonus: 2, count: 0, icon: "‚ö°" },
                { id: 1, name_es: "Caf√© para Devs", name_en: "Dev Coffee", type: 'speed', cost: 10, costType: 'gems', bonus: 1.5, count: 0, icon: "‚òï" }
            ]
        };

        let settings = {
            lang: 'es', // 'es' o 'en'
            feverActive: false,
            feverMultiplier: 1
        };

        /* 2. DICCIONARIO DE TRADUCCI√ìN COMPLETO */
        const langDB = {
            es: {
                machines: "Hardware",
                market: "Mercado Cripto",
                upgrades: "Mejoras",
                nav_mining: "Miner√≠a",
                nav_market: "Mercado",
                nav_upgrades: "Mejoras",
                tap_msg: "¬°Toca para minar!",
                lvl: "Nivel",
                cost: "Costo",
                bought: "Comprado",
                
                // Notificaciones
                notif_no_money: "‚õî Dinero insuficiente",
                notif_no_gems: "üíé Gemas insuficientes",
                notif_buy_ok: "‚úÖ Comprado: ",
                notif_fever: "üî• ¬°FIEBRE DE CRIPTO! x2",
                notif_lang: "üá™üá∏ Idioma cambiado a Espa√±ol"
            },
            en: {
                machines: "Hardware",
                market: "Crypto Market",
                upgrades: "Upgrades",
                nav_mining: "Mining",
                nav_market: "Market",
                nav_upgrades: "Upgrades",
                tap_msg: "Tap to mine!",
                lvl: "Level",
                cost: "Cost",
                bought: "Owned",

                // Notifications
                notif_no_money: "‚õî Insufficient Funds",
                notif_no_gems: "üíé Insufficient Gems",
                notif_buy_ok: "‚úÖ Bought: ",
                notif_fever: "üî• CRYPTO FEVER! x2",
                notif_lang: "üá∫üá∏ Language changed to English"
            }
        };

        /* 3. FUNCIONES DEL N√öCLEO (CORE) */

        // Bucle del juego (1 vez por segundo)
        setInterval(() => {
            let passiveIncome = gameData.prodPerSec * settings.feverMultiplier;
            // Aplicar multiplicadores de Criptomonedas (si las tienes)
            gameData.cryptos.forEach(c => {
                if(c.owned) passiveIncome += (passiveIncome * c.multiplier);
            });
            
            gameData.money += passiveIncome;
            
            // Probabilidad aleatoria de fiebre (1% cada segundo)
            if(!settings.feverActive && Math.random() < 0.01) {
                activateFever();
            }

            updateUI();
        }, 1000);

        // Click principal
        function handleClick(e) {
            // Valor del click base + 1% de la producci√≥n por segundo
            let clickVal = (gameData.clickValue + (gameData.prodPerSec * 0.01)) * settings.feverMultiplier;
            gameData.money += clickVal;

            // Efecto visual de n√∫mero flotante
            createFloatNumber(e.clientX, e.clientY, "+" + formatNum(clickVal));
            updateUI();
        }

        // Comprar M√°quinas
        function buyMachine(index) {
            let m = gameData.machines[index];
            if (gameData.money >= m.cost) {
                gameData.money -= m.cost;
                m.count++;
                m.cost = Math.floor(m.cost * 1.15); // Sube precio 15%
                
                recalcProd();
                showNotif(getText('notif_buy_ok') + (settings.lang === 'es' ? m.name_es : m.name_en));
                updateUI();
            } else {
                showNotif(getText('notif_no_money'));
            }
        }

        // Comprar Cripto (Solo una vez cada una)
        function buyCrypto(index) {
            let c = gameData.cryptos[index];
            if (c.owned) return; // Ya comprada

            if (gameData.money >= c.cost) {
                gameData.money -= c.cost;
                c.owned = true;
                showNotif(getText('notif_buy_ok') + (settings.lang === 'es' ? c.name_es : c.name_en));
                updateUI();
            } else {
                showNotif(getText('notif_no_money'));
            }
        }

        // Comprar Mejoras (Upgrades)
        function buyUpgrade(index) {
            let u = gameData.upgrades[index];
            let canBuy = false;

            // L√≥gica dinero o gemas
            if(u.costType === 'money' && gameData.money >= u.cost) {
                gameData.money -= u.cost;
                canBuy = true;
            } else if(u.costType === 'gems' && gameData.gems >= u.cost) {
                gameData.gems -= u.cost;
                canBuy = true;
            } else {
                // Error espec√≠fico
                if(u.costType === 'gems') showNotif(getText('notif_no_gems'));
                else showNotif(getText('notif_no_money'));
                return;
            }

            if(canBuy) {
                u.count++;
                u.cost = Math.floor(u.cost * 1.5); // Sube precio mucho
                if(u.type === 'click') gameData.clickValue *= u.bonus;
                // Aqu√≠ podr√≠as a√±adir l√≥gica para bonus de velocidad, etc.
                showNotif(getText('notif_buy_ok') + (settings.lang === 'es' ? u.name_es : u.name_en));
                updateUI();
            }
        }

        function recalcProd() {
            let total = 0;
            gameData.machines.forEach(m => total += (m.prod * m.count));
            gameData.prodPerSec = total;
        }

        /* 4. FUNCIONES DE UI Y UTILIDADES */

        function getText(key) {
            return langDB[settings.lang][key] || key;
        }

        function toggleLanguage() {
            settings.lang = (settings.lang === 'es') ? 'en' : 'es';
            showNotif(getText('notif_lang'));
            renderLists(); // Re-renderizar listas para cambiar nombres
            updateUI(); // Actualizar textos fijos
        }

        function switchTab(tabName) {
            // Ocultar todos los tabs
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));

            // Mostrar el elegido
            document.getElementById('tab-' + tabName).classList.add('active');
            document.getElementById('nav-' + tabName).classList.add('active');
        }

        // Generar listas HTML (M√°quinas, Criptos, Mejoras)
        function renderLists() {
            // -- M√ÅQUINAS --
            const mList = document.getElementById('machines-list');
            mList.innerHTML = '';
            gameData.machines.forEach((m, i) => {
                let name = settings.lang === 'es' ? m.name_es : m.name_en;
                let btnDisabled = gameData.money < m.cost ? 'disabled' : '';
                
                mList.innerHTML += `
                    <div class="card">
                        <div class="card-icon">${m.icon}</div>
                        <div class="card-info">
                            <h4>${name} <span class="lvl">Lvl ${m.count}</span></h4>
                            <p>+${formatNum(m.prod)} $/s</p>
                        </div>
                        <button class="buy-btn" onclick="buyMachine(${i})" ${btnDisabled}>
                            $${formatNum(m.cost)}
                        </button>
                    </div>
                `;
            });

            // -- CRIPTOS --
            const cList = document.getElementById('crypto-list');
            cList.innerHTML = '';
            gameData.cryptos.forEach((c, i) => {
                let name = settings.lang === 'es' ? c.name_es : c.name_en;
                let desc = settings.lang === 'es' ? c.desc_es : c.desc_en;
                let btnText = c.owned ? getText('bought') : '$' + formatNum(c.cost);
                let btnState = c.owned ? 'disabled style="background:#444"' : (gameData.money < c.cost ? 'disabled' : '');
                
                cList.innerHTML += `
                    <div class="card">
                        <div class="card-icon">${c.icon}</div>
                        <div class="card-info">
                            <h4>${name}</h4>
                            <p>${desc}</p>
                        </div>
                        <button class="buy-btn" onclick="buyCrypto(${i})" ${btnState}>
                            ${btnText}
                        </button>
                    </div>
                `;
            });

            // -- MEJORAS --
            const uList = document.getElementById('upgrades-list');
            uList.innerHTML = '';
            gameData.upgrades.forEach((u, i) => {
                let name = settings.lang === 'es' ? u.name_es : u.name_en;
                let symbol = u.costType === 'gems' ? 'üíé' : '$';
                let btnDisabled = (u.costType === 'gems' ? gameData.gems : gameData.money) < u.cost ? 'disabled' : '';

                uList.innerHTML += `
                    <div class="card">
                        <div class="card-icon">${u.icon}</div>
                        <div class="card-info">
                            <h4>${name} <span class="lvl">Lvl ${u.count}</span></h4>
                            <p>Click x${u.bonus}</p>
                        </div>
                        <button class="buy-btn" onclick="buyUpgrade(${i})" ${btnDisabled}>
                            ${symbol}${formatNum(u.cost)}
                        </button>
                    </div>
                `;
            });
        }

        function updateUI() {
            // Actualizar contadores
            document.getElementById('display-money').innerText = formatNum(gameData.money);
            document.getElementById('display-gems').innerText = formatNum(gameData.gems);
            document.getElementById('display-prod').innerText = formatNum(gameData.prodPerSec * settings.feverMultiplier);

            // Actualizar textos de idioma (Labels)
            document.getElementById('lbl-machines').innerText = getText('machines');
            document.getElementById('lbl-market').innerText = getText('market');
            document.getElementById('lbl-upgrades').innerText = getText('upgrades');
            document.getElementById('lbl-tap').innerText = getText('tap_msg');
            
            document.querySelector('#nav-mining .nav-text').innerText = getText('nav_mining');
            document.querySelector('#nav-crypto .nav-text').innerText = getText('nav_market');
            document.querySelector('#nav-upgrades .nav-text').innerText = getText('nav_upgrades');

            // Refrescar botones (Habilitar/Deshabilitar seg√∫n dinero)
            // Nota: Para optimizar, idealmente solo actualizamos clases, pero re-renderizar es seguro en apps peque√±as.
            renderLists(); 
        }

        // Sistema de Notificaciones mejorado (Sin X roja)
        function activateFever() {
            if (settings.feverActive) return;
            settings.feverActive = true;
            settings.feverMultiplier = 2; // Doble producci√≥n
            
            document.body.classList.add('fiebre-mode');
            showNotif(getText('notif_fever'), 5000);

            setTimeout(() => {
                settings.feverActive = false;
                settings.feverMultiplier = 1;
                document.body.classList.remove('fiebre-mode');
            }, 10000); // 10 segundos
        }

        function showNotif(msg, duration = 2000) {
            const container = document.getElementById('notification-area');
            const el = document.createElement('div');
            el.className = 'notif';
            el.innerText = msg;
            container.appendChild(el);
            
            // Se elimina solo gracias a la animaci√≥n CSS, pero lo removemos del DOM:
            setTimeout(() => {
                el.remove();
            }, duration + 500);
        }

        function createFloatNumber(x, y, text) {
            const el = document.createElement('div');
            el.className = 'float-num';
            el.innerText = text;
            el.style.left = x + 'px';
            el.style.top = y + 'px';
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 800);
        }

        // Formato n√∫meros (1.2k, 1.5M)
        function formatNum(num) {
            if (num >= 1000000) return (num / 1000000).toFixed(2) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(1) + 'k';
            return Math.floor(num);
        }

        // Inicio
        window.onload = function() {
            recalcProd();
            renderLists();
            updateUI();
        };

    </script>
</body>
</html>